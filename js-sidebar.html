<!doctype html>
<html>
    <head></head>
    <body>
    

<script type="text/javascript">


  (function(){
      "use strict"
      
      setTimeout(() => {

                // Change links to self
                const link = document.querySelectorAll("a");
          for (var i = 0; i < link.length; i++) {

            link[i].setAttribute("target", "_self");
          }

      }, "100");

        // create new element
        const elem = document.createElement('div');
        elem.classList.add('sub-nav');
        // add text
        var htmlpre = '<ul>';
        const h2 = document.querySelectorAll(".p02-text h2");
        
        var htmlArray = [];
        for (var i = 0; i < h2.length; i++) {
          var htmlinner = '<li><a href="#'+ i +'" id="anchor_'+ i +'" class="anchor-link" name="anchor_'+ i +'">'+ h2[i].innerText +'</a></li>';
          htmlArray.push(htmlinner);

          h2[i].setAttribute("id", i);
        }

        var htmljoin = htmlArray.join();
        var htmlfinal = htmljoin.replace(/,/g,'');
        
        var htmlpost = '</ul>';

        elem.innerHTML = htmlpre + htmlfinal + htmlpost;        

        // grab target element reference
        const target = document.querySelectorAll(".active");

        // insert the element before target element
        
          target[0].appendChild(elem, target[0]);

          // scroll to element on load

          var url = window.location.href;
          var id = url.substring(url.indexOf('#') + 1);

          const scrollLink = document.getElementById(id[0]);

            var topDiv = scrollLink.offsetTop;
            window.scroll({top: topDiv, left: 0, behavior: 'auto'}); 

             // smooth scroll

            scrollTo();
        
  })()


function scrollTo() {
	const links = document.querySelectorAll('.anchor-link');
	links.forEach(each => (each.onclick = scrollAnchors));
}

function scrollAnchors(e, respond = null) {
	const distanceToTop = el => Math.floor(el.getBoundingClientRect().top);
	e.preventDefault();
	var targetID = (respond) ? respond.getAttribute('href') : this.getAttribute('href');
	const targetAnchor = document.querySelector(targetID);
	if (!targetAnchor) return;
	const originalTop = distanceToTop(targetAnchor);
	window.scrollBy({ top: originalTop, left: 0, behavior: 'smooth' });
	const checkIfDone = setInterval(function() {
		const atBottom = window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2;
		if (distanceToTop(targetAnchor) === 0 || atBottom) {
			targetAnchor.tabIndex = '-1';
			targetAnchor.focus();
			window.history.pushState('', '', targetID);
			clearInterval(checkIfDone);
		}
	}, 100);
}
  
</script>
</body>
</html>